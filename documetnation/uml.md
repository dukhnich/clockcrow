# UML-діаграма класів

```
+--------------------+
|      Game          |<-----------------------------+
+--------------------+                              |
| - state: GameState |                              |
| - time: TimeManager|                              |
| - traits: TraitMgr |-------------------+          |
| - inventory: Inv   |                   |          |
| - currentLoc: Loc  |                   |          |
| - view: IGameView  |                   |          |
+--------------------+                   |          |
| + start()          |                   |          |
| + nextState()      |                   |          |
+--------------------+                   |          |
        |                                  |        |
        V                                  |        V
+--------------------+                 +---------+--------------+
|   GameState        |<------------+   |     TraitManager      |
+--------------------+             |   +-----------------------+
| +handle()          |             |   | - traits: Trait[]     |
+--------------------+             |   +-----------------------+
    ^    ^    ^    ^               |   | +addObserver()        |
    |    |    |    |               |   | +removeObserver()     |
    |    |    |    |               |   | +notifyObservers()    |
+--+----+----+----+---+            |   +-----------------------+
|  |    |    |    |   |            |                |
|  |    |    |    |   |            +----------------+
|  |    |    |    |   |
|  |    |    |    |   |                                  +----------------------+
|  |    |    |    |   |                                  |     Trait            |
|  |    |    |    |   |                                  +----------------------+
|Intro|Explore|Event|Final|GameOver                      | - name: string       |
+---------------------------------+                      | - value: int         |
                                                         +----------------------+

+------------------------------------+
|      Location (abstract)           |<-----+ 
+------------------------------------+      |
| - name: String                     |      |
| - npcs: NPC[]                      |      |<---------+
| - events: Event[]                  |      |          |
+------------------------------------+      |          |
| +enter()                           |      |          |
| +getOptions()                      |      |          |
+------------------------------------+      |          |
      ^          ^         ^         ^      |          |
      |          |         |         |      |          |
    Market   Tavern    Temple    etc. (concrete)       |
                                                       |
+-----------------------------+                        |
| AbstractLocationFactory     |<-----+                 |
+-----------------------------+      |                 |
| +createLocation(type):Loc   |      |                 |
+-----------------------------+      |                 |
                                     |                 |
                                +-----------+          |
                                | LocFactory|          |
                                +-----------+          |
                                | - impl.    |---------+

+---------------------+
|      NPC            |<----------------------+
+---------------------+                       |
| - name: string      |                       |
| - strategy: NPCBehavior|                    |
+---------------------+                       |
| +interact()         |                       |
+---------------------+                       |
             |                                |
             V                                |
+---------------------------+                 |
|     NPCBehavior (interface)|                |
+---------------------------+                 |
| +act()                    |                 |
+---------------------------+                 |
    ^         ^        ^                      |
 Marno... Turko.. etc (Concrete Behaviors)----+

+-------------------+
|    TimeManager    |<----------+
+-------------------+           |
| - time: int       |           |
| - observers: []   |           |
+-------------------+           |
| +addObserver()    |           |
| +notifyObservers()|           |
| +advance()        |           |
+-------------------+           |
                                |
+-------------------+           |
|   Observer        |-----------+
+-------------------+
| +update()         |
+-------------------+

+-------------------+
|    Inventory      |
+-------------------+
| - items: Item[]   |
+-------------------+
| +addItem()        |
| +removeItem()     |
+-------------------+

+-------------------+
|    Item           |
+-------------------+
| - name: string    |
| - effect(): func  |
+-------------------+

      +-------------------------------+
      |      IGameView (interface)    |
      +-------------------------------+
      | +showMessage(msg): void       |
      | +promptText(q): Promise<string>|
      | +promptChoice(q, arr): Promise<string>|
      | +showStatus(obj): void        |
      +-------------------------------+
                  ^
                  |
      +-------------------------------+
      |  CLIInquirerView              |
      +-------------------------------+
      | implements IGameView          |
      | (calls to inquirer prompts)   |
      +-------------------------------+
```

## MVP-events:

Перехід по локаціях, один/два вибори в кожній;
Один-два NPC на локацію;
Фіксація та зміна рис після кожної взаємодії.
Опис ключових сутностей та патернів:
Game: Центр усієї гри. Тримає state, лічильник часу, менеджер traits, інвентар, поточну локацію. Переводить гру в наступний state, керує всіма підсистемами.


### GameState (State Pattern):

Абстрактний клас для станів гри: Intro, Explore, Event, Final, GameOver.
Власний метод handle() для своєї логіки.
State переходи делегуються Game.


### Location (Abstract Product, Factory Method):

Абстрактний клас із методами enter(), getOptions().
Конкретні локації (Market, Tavern, Temple...) успадковують Location.
Factory (LocationFactory) генерує локації (патерн Abstract Factory/Factory Method), що спрощує додавання нових.


### NPC (Strategy Pattern):
Містить імʼя і стратегію (NPCBehavior).
interact() делегує act() стратегії.
Легко міняти чи додавати нові поведінки NPC.


### Trait, TraitManager (Observer Pattern):
Trait — примітив із назвою і значенням.
TraitManager містить масив Traits, дозволяє підписникам (Observer) реагувати на зміни (наприклад, якщо змінилась риса — змінити текст фіналу, відображення, loadaction).


### TimeManager (Observer Pattern):
Тримає поточний час, просуває його, сповіщає підписників (локації, NPC, GameState) при кожній зміні.


### Inventory, Item (Simple Composition):
Простий інвентар, масив предметів, кожен предмет — зі своїм впливом на гру.


### IGameView (pattern Adapter / View/Presenter)
Дозволяє писати й тестувати ігрову логіку незалежно від інтерфейсу, дає можливість легко "додавати" нові режими керування (CLI, web, TEletype, Discord-бот, і т.д.).

